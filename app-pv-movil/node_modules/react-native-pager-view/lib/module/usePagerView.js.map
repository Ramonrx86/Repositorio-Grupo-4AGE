{"version":3,"names":["PagerView","Animated","useCallback","useMemo","useRef","useState","AnimatedPagerView","createAnimatedComponent","usePagerView","pagesAmount","arguments","length","undefined","ref","pages","setPages","Array","fill","map","_v","index","activePage","setActivePage","isAnimated","setIsAnimated","overdragEnabled","setOverdragEnabled","scrollEnabled","setScrollEnabled","scrollState","setScrollState","progress","setProgress","position","offset","onPageScrollOffset","Value","current","onPageScrollPosition","onPageSelectedPosition","setPage","page","_ref$current","_ref$current2","setPageWithoutAnimation","addPage","prevPages","lastPageNumber","removePage","slice","toggleAnimation","animated","toggleScroll","enabled","toggleOverdrag","onPageScroll","event","nativeEvent","useNativeDriver","onPageSelected","listener","_ref","onPageScrollStateChanged","e","pageScrollState"],"sources":["usePagerView.ts"],"sourcesContent":["import type * as ReactNative from 'react-native';\nimport type {\n  OnPageScrollEventData as PagerViewOnPageScrollEventData,\n  OnPageSelectedEventData as PagerViewOnPageSelectedEventData,\n  OnPageScrollStateChangedEventData as PageScrollStateChangedNativeEventData,\n} from './specs/PagerViewNativeComponent';\n\ntype PageScrollStateChangedNativeEvent =\n  ReactNative.NativeSyntheticEvent<PageScrollStateChangedNativeEventData>;\n\nimport { PagerView } from './PagerView';\n\nimport { Animated } from 'react-native';\nimport { useCallback, useMemo, useRef, useState } from 'react';\n\nexport type UsePagerViewProps = ReturnType<typeof usePagerView>;\n\nconst AnimatedPagerView = Animated.createAnimatedComponent(PagerView);\n\ntype UsePagerViewParams = {\n  pagesAmount: number;\n};\n\nexport function usePagerView(\n  { pagesAmount }: UsePagerViewParams = { pagesAmount: 0 }\n) {\n  const ref = useRef<PagerView>(null);\n  const [pages, setPages] = useState<number[]>(\n    new Array(pagesAmount).fill('').map((_v, index) => index)\n  );\n  const [activePage, setActivePage] = useState(0);\n  const [isAnimated, setIsAnimated] = useState(true);\n  const [overdragEnabled, setOverdragEnabled] = useState(false);\n  const [scrollEnabled, setScrollEnabled] = useState(true);\n  const [scrollState, setScrollState] = useState('idle');\n  const [progress, setProgress] = useState({ position: 0, offset: 0 });\n  const onPageScrollOffset = useRef(new Animated.Value(0)).current;\n  const onPageScrollPosition = useRef(new Animated.Value(0)).current;\n  const onPageSelectedPosition = useRef(new Animated.Value(0)).current;\n\n  const setPage = useCallback(\n    (page: number) =>\n      isAnimated\n        ? ref.current?.setPage(page)\n        : ref.current?.setPageWithoutAnimation(page),\n    [isAnimated]\n  );\n\n  const addPage = useCallback(() => {\n    setPages((prevPages) => {\n      const lastPageNumber = prevPages[prevPages.length - 1];\n      if (lastPageNumber) {\n        return [...prevPages, lastPageNumber + 1];\n      }\n      return prevPages;\n    });\n  }, []);\n\n  const removePage = useCallback(() => {\n    setPages((prevPages) => {\n      if (prevPages.length === 1) {\n        return prevPages;\n      }\n      return prevPages.slice(0, prevPages.length - 1);\n    });\n  }, []);\n\n  const toggleAnimation = useCallback(\n    () => setIsAnimated((animated) => !animated),\n    []\n  );\n\n  const toggleScroll = useCallback(\n    () => setScrollEnabled((enabled) => !enabled),\n    []\n  );\n\n  const toggleOverdrag = useCallback(\n    () => setOverdragEnabled((enabled) => !enabled),\n    []\n  );\n\n  const onPageScroll = useMemo(\n    () =>\n      Animated.event<PagerViewOnPageScrollEventData>(\n        [\n          {\n            nativeEvent: {\n              offset: onPageScrollOffset,\n              position: onPageScrollPosition,\n            },\n          },\n        ],\n        {\n          useNativeDriver: true,\n        }\n      ),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n\n  const onPageSelected = useMemo(\n    () =>\n      Animated.event<PagerViewOnPageSelectedEventData>(\n        [{ nativeEvent: { position: onPageSelectedPosition } }],\n        {\n          listener: ({ nativeEvent: { position } }) => {\n            setActivePage(position);\n          },\n          useNativeDriver: true,\n        }\n      ),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n\n  const onPageScrollStateChanged = useCallback(\n    (e: PageScrollStateChangedNativeEvent) => {\n      setScrollState(e.nativeEvent.pageScrollState);\n    },\n    []\n  );\n\n  return {\n    ref,\n    activePage,\n    isAnimated,\n    pages,\n    scrollState,\n    scrollEnabled,\n    progress,\n    overdragEnabled,\n    setPage,\n    addPage,\n    removePage,\n    toggleScroll,\n    toggleAnimation,\n    setProgress,\n    onPageScroll,\n    onPageSelected,\n    onPageScrollStateChanged,\n    toggleOverdrag,\n    AnimatedPagerView,\n    PagerView,\n  };\n}\n"],"mappings":"AAUA,SAASA,SAAS,QAAQ,aAAa;AAEvC,SAASC,QAAQ,QAAQ,cAAc;AACvC,SAASC,WAAW,EAAEC,OAAO,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAI9D,MAAMC,iBAAiB,GAAGL,QAAQ,CAACM,uBAAuB,CAACP,SAAS,CAAC;AAMrE,OAAO,SAASQ,YAAYA,CAAA,EAE1B;EAAA,IADA;IAAEC;EAAgC,CAAC,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG;IAAED,WAAW,EAAE;EAAE,CAAC;EAExD,MAAMI,GAAG,GAAGT,MAAM,CAAY,IAAI,CAAC;EACnC,MAAM,CAACU,KAAK,EAAEC,QAAQ,CAAC,GAAGV,QAAQ,CAChC,IAAIW,KAAK,CAACP,WAAW,CAAC,CAACQ,IAAI,CAAC,EAAE,CAAC,CAACC,GAAG,CAAC,CAACC,EAAE,EAAEC,KAAK,KAAKA,KAAK,CAC1D,CAAC;EACD,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGjB,QAAQ,CAAC,CAAC,CAAC;EAC/C,MAAM,CAACkB,UAAU,EAAEC,aAAa,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAM,CAACoB,eAAe,EAAEC,kBAAkB,CAAC,GAAGrB,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM,CAACsB,aAAa,EAAEC,gBAAgB,CAAC,GAAGvB,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAACwB,WAAW,EAAEC,cAAc,CAAC,GAAGzB,QAAQ,CAAC,MAAM,CAAC;EACtD,MAAM,CAAC0B,QAAQ,EAAEC,WAAW,CAAC,GAAG3B,QAAQ,CAAC;IAAE4B,QAAQ,EAAE,CAAC;IAAEC,MAAM,EAAE;EAAE,CAAC,CAAC;EACpE,MAAMC,kBAAkB,GAAG/B,MAAM,CAAC,IAAIH,QAAQ,CAACmC,KAAK,CAAC,CAAC,CAAC,CAAC,CAACC,OAAO;EAChE,MAAMC,oBAAoB,GAAGlC,MAAM,CAAC,IAAIH,QAAQ,CAACmC,KAAK,CAAC,CAAC,CAAC,CAAC,CAACC,OAAO;EAClE,MAAME,sBAAsB,GAAGnC,MAAM,CAAC,IAAIH,QAAQ,CAACmC,KAAK,CAAC,CAAC,CAAC,CAAC,CAACC,OAAO;EAEpE,MAAMG,OAAO,GAAGtC,WAAW,CACxBuC,IAAY;IAAA,IAAAC,YAAA,EAAAC,aAAA;IAAA,OACXpB,UAAU,IAAAmB,YAAA,GACN7B,GAAG,CAACwB,OAAO,cAAAK,YAAA,uBAAXA,YAAA,CAAaF,OAAO,CAACC,IAAI,CAAC,IAAAE,aAAA,GAC1B9B,GAAG,CAACwB,OAAO,cAAAM,aAAA,uBAAXA,aAAA,CAAaC,uBAAuB,CAACH,IAAI,CAAC;EAAA,GAChD,CAAClB,UAAU,CACb,CAAC;EAED,MAAMsB,OAAO,GAAG3C,WAAW,CAAC,MAAM;IAChCa,QAAQ,CAAE+B,SAAS,IAAK;MACtB,MAAMC,cAAc,GAAGD,SAAS,CAACA,SAAS,CAACnC,MAAM,GAAG,CAAC,CAAC;MACtD,IAAIoC,cAAc,EAAE;QAClB,OAAO,CAAC,GAAGD,SAAS,EAAEC,cAAc,GAAG,CAAC,CAAC;MAC3C;MACA,OAAOD,SAAS;IAClB,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;EAEN,MAAME,UAAU,GAAG9C,WAAW,CAAC,MAAM;IACnCa,QAAQ,CAAE+B,SAAS,IAAK;MACtB,IAAIA,SAAS,CAACnC,MAAM,KAAK,CAAC,EAAE;QAC1B,OAAOmC,SAAS;MAClB;MACA,OAAOA,SAAS,CAACG,KAAK,CAAC,CAAC,EAAEH,SAAS,CAACnC,MAAM,GAAG,CAAC,CAAC;IACjD,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMuC,eAAe,GAAGhD,WAAW,CACjC,MAAMsB,aAAa,CAAE2B,QAAQ,IAAK,CAACA,QAAQ,CAAC,EAC5C,EACF,CAAC;EAED,MAAMC,YAAY,GAAGlD,WAAW,CAC9B,MAAM0B,gBAAgB,CAAEyB,OAAO,IAAK,CAACA,OAAO,CAAC,EAC7C,EACF,CAAC;EAED,MAAMC,cAAc,GAAGpD,WAAW,CAChC,MAAMwB,kBAAkB,CAAE2B,OAAO,IAAK,CAACA,OAAO,CAAC,EAC/C,EACF,CAAC;EAED,MAAME,YAAY,GAAGpD,OAAO,CAC1B,MACEF,QAAQ,CAACuD,KAAK,CACZ,CACE;IACEC,WAAW,EAAE;MACXvB,MAAM,EAAEC,kBAAkB;MAC1BF,QAAQ,EAAEK;IACZ;EACF,CAAC,CACF,EACD;IACEoB,eAAe,EAAE;EACnB,CACF,CAAC;EACH;EACA,EACF,CAAC;EAED,MAAMC,cAAc,GAAGxD,OAAO,CAC5B,MACEF,QAAQ,CAACuD,KAAK,CACZ,CAAC;IAAEC,WAAW,EAAE;MAAExB,QAAQ,EAAEM;IAAuB;EAAE,CAAC,CAAC,EACvD;IACEqB,QAAQ,EAAEC,IAAA,IAAmC;MAAA,IAAlC;QAAEJ,WAAW,EAAE;UAAExB;QAAS;MAAE,CAAC,GAAA4B,IAAA;MACtCvC,aAAa,CAACW,QAAQ,CAAC;IACzB,CAAC;IACDyB,eAAe,EAAE;EACnB,CACF,CAAC;EACH;EACA,EACF,CAAC;EAED,MAAMI,wBAAwB,GAAG5D,WAAW,CACzC6D,CAAoC,IAAK;IACxCjC,cAAc,CAACiC,CAAC,CAACN,WAAW,CAACO,eAAe,CAAC;EAC/C,CAAC,EACD,EACF,CAAC;EAED,OAAO;IACLnD,GAAG;IACHQ,UAAU;IACVE,UAAU;IACVT,KAAK;IACLe,WAAW;IACXF,aAAa;IACbI,QAAQ;IACRN,eAAe;IACfe,OAAO;IACPK,OAAO;IACPG,UAAU;IACVI,YAAY;IACZF,eAAe;IACflB,WAAW;IACXuB,YAAY;IACZI,cAAc;IACdG,wBAAwB;IACxBR,cAAc;IACdhD,iBAAiB;IACjBN;EACF,CAAC;AACH"}